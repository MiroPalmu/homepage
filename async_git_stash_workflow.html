<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Async git-stash workflow enables test test-driven development &#8212; Miro Palmu&#39;s homepage</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=d45e8c67"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  
   
  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
             <section id="async-git-stash-workflow-enables-test-test-driven-development">
<h1>Async git-stash workflow enables test test-driven development<a class="headerlink" href="#async-git-stash-workflow-enables-test-test-driven-development" title="Link to this heading">¶</a></h1>
<p>Edit: some comments about this post at <a class="reference external" href="https://news.ycombinator.com/item?id=40972488">Hacker News</a>.</p>
<p>This blog post is showcase of a workflow aimed for developing
systems and its consisting components following test-driven development.</p>
<p>In it, features are build from top down while eagerly developing the components when needed.
Git stash enables the asynchronous development and stash messages storing
dependency information among the asynchronously developed features.</p>
<p>Let’s say that we are developing a library in C++ which provides a computer type <code class="code docutils literal notranslate"><span class="pre">DeepThought</span></code>
that can generate Answer to The Ultimate Question of Life, the Universe, and Everything.
Following shell script that emulates the steps taken in development which follows
the async git-stash workflow.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assume that magic exists and can be interfaced with program magic.</span>

magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span>add<span class="w"> </span><span class="s2">&quot;DeepThought::answer() returns 42.&quot;</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Fails.</span>

<span class="c1"># Can not implement computer without a processor.</span>
git<span class="w"> </span>stash<span class="w"> </span>push<span class="w"> </span>-um<span class="w"> </span><span class="s2">&quot;DeeptThought (deps: processor)&quot;</span>

magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span>add<span class="w"> </span><span class="s2">&quot;Processor performs admirably in arithmetics.&quot;</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Fails.</span>

<span class="c1"># Can not implement processor without memory.</span>
git<span class="w"> </span>stash<span class="w"> </span>push<span class="w"> </span>-um<span class="w"> </span><span class="s2">&quot;processor (deps: memory)&quot;</span>

magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span>add<span class="w"> </span><span class="s2">&quot;Memory lasts for millions of millennia.&quot;</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Fails.</span>

<span class="c1"># Can not implement memory without technique to store information.&quot;</span>
git<span class="w"> </span>stash<span class="w"> </span>push<span class="w"> </span>-um<span class="w"> </span><span class="s2">&quot;memory (deps: book)&quot;</span>

magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span>add<span class="w"> </span><span class="s2">&quot;Book can store 100 pages.&quot;</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Fails.</span>

<span class="c1"># Can not implement books without pages&quot;</span>
git<span class="w"> </span>stash<span class="w"> </span>push<span class="w"> </span>-um<span class="w"> </span><span class="s2">&quot;book (deps: page)&quot;</span>

git<span class="w"> </span>stash<span class="w"> </span>list

<span class="c1"># stash@{0}: On main: book (deps: page)</span>
<span class="c1"># stash@{1}: On main: memory (deps: book)</span>
<span class="c1"># stash@{2}: On main: processor (deps: memory)</span>
<span class="c1"># stash@{3}: On main: DeepThought (deps: processor)</span>

magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span>add<span class="w"> </span><span class="s2">&quot;Page can be used as memory.&quot;</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Fails.</span>

magic<span class="w"> </span>implement<span class="w"> </span>page
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Passes.</span>

git<span class="w"> </span>add<span class="w"> </span>*
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;feat: page&quot;</span>

git<span class="w"> </span>stash<span class="w"> </span>pop<span class="w"> </span><span class="c1"># book (deps: page)&quot;</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Still fails.</span>

magic<span class="w"> </span>implement<span class="w"> </span><span class="s2">&quot;Books that fit 100 pages.&quot;</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Passes.</span>

git<span class="w"> </span>add<span class="w"> </span>*
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;feat: book&quot;</span>

git<span class="w"> </span>stash<span class="w"> </span>pop<span class="w"> </span><span class="c1"># memory (deps: book)&quot;</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Still fails.</span>

magic<span class="w"> </span>implement<span class="w"> </span><span class="s2">&quot;Memory that lasts millions of millennia using books.&quot;</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Passes.</span>

git<span class="w"> </span>add<span class="w"> </span>*
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;feat: memory&quot;</span>

git<span class="w"> </span>stash<span class="w"> </span>pop<span class="w"> </span><span class="c1"># processor (deps: memory)&quot;</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Still fails.</span>

magic<span class="w"> </span>implement<span class="w"> </span><span class="s2">&quot;Processor that performs admirably in arithmetics.&quot;</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Passes.</span>

git<span class="w"> </span>add<span class="w"> </span>*
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;feat: processor&quot;</span>

git<span class="w"> </span>stash<span class="w"> </span>pop<span class="w"> </span><span class="c1"># DeepThought (deps: processor)</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Still fails.</span>

magic<span class="w"> </span>implement<span class="w"> </span><span class="s2">&quot;DeepThought computer that can give the answer.&quot;</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Passes but takes a while.</span>

magic<span class="w"> </span>refactor<span class="w"> </span><span class="s2">&quot;Make memory out of pages directly removing reduntant book.&quot;</span>
magic<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># Passes but takes a while.</span>

git<span class="w"> </span>add<span class="w"> </span>*
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;refactor: use pages directly from memory&quot;</span>
git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>HEAD~6..HEAD

<span class="c1"># bc9a81d (HEAD -&gt; main) refactor: use pages directly from memory</span>
<span class="c1"># 9652c97 feat: Deep Thought</span>
<span class="c1"># 3rer23j feat: processor</span>
<span class="c1"># a21f96e feat: memory</span>
<span class="c1"># 49577b3 feat: book</span>
<span class="c1"># 6f9315c feat: page</span>
</pre></div>
</div>
</section>

<div class="section ablog__blog_comments">
     
<div class="section ablog__prev-next">
  <span class="ablog__prev">
      Previous:
    
    <a href="bash_quick_select_prompter.html">
      
      <span>Bash quick select prompter utility</span>
    </a>
    
  </span>
  <span class="ablog__spacer">&nbsp;</span>
  <span class="ablog__next">
    
  </span>
</div>
  
</div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">homepage</a></h1>









<div class="ablog-sidebar-item ablog__postcard">
   
  <h2>
     
    <span>16.07.2024</span>
    
  </h2>
  <ul>
    <div class="ablog-sidebar-item ablog__postcard2">
   
  <li id="ablog-sidebar-item author ablog__author">
    <span>
       Author: 
    </span>
     
    <a href="blog/author/miro-palmu.html">Miro Palmu</a>
      
  </li>
      
  <li id="ablog-sidebar-item tags ablog__tags">
    <span>
        Tags:  
    </span>
     
    <a href="blog/tag/blog.html">blog</a>
        
    <a href="blog/tag/tools.html">tools</a>
        
    <a href="blog/tag/workflow.html">workflow</a>
        
    <a href="blog/tag/git.html">git</a>
        
    <a href="blog/tag/git-stash.html">git-stash</a>
      
  </li>
   
</div>
  </ul>
</div>

<div class="ablog-sidebar-item ablog__tagcloud">
  <link
    rel="stylesheet"
    href="_static/ablog/tagcloud.css"
    type="text/css"
  />
  <h3><a href="blog/tag.html">Tags</a></h3>
  <ul class="ablog-cloud">
     
    <li class="ablog-cloud ablog-cloud-2">
      <a href="blog/tag/c.html">C++</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/c20.html">C++20</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/dsl.html">DSL</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-2">
      <a href="blog/tag/bash.html">bash</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-5">
      <a href="blog/tag/blog.html">blog</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/consteval.html">consteval</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/constexpr.html">constexpr</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/desing.html">desing</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/git.html">git</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/git-stash.html">git-stash</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/metaprogramming.html">metaprogramming</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/noexcept.html">noexcept</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/noglob.html">noglob</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/pipe.html">pipe</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/principle.html">principle</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/scripting.html">scripting</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-2">
      <a href="blog/tag/shell.html">shell</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/tools.html">tools</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/utility.html">utility</a>
    </li>
      
    <li class="ablog-cloud ablog-cloud-1">
      <a href="blog/tag/workflow.html">workflow</a>
    </li>
     
  </ul>
</div>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Miro Palmu.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/async_git_stash_workflow.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>